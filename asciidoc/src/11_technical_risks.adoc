=== Backend / Microservices

[[section-technical-risks]]
== Risks and Technical Debts

=== Infrastructure Risks

[cols="1,2,2,2"]
|===
|Risk |Description |Probability |Mitigation

|**Data Loss**
|All data is stored in H2 in-memory database. Container restart or VM reprovisioning loses all data.
|High (certain on restart)
|Acceptable for demo project. Document that data is ephemeral.

|**Single Point of Failure**
|Single VM hosts all services. VM failure = complete outage.
|Medium
|Acceptable for school project. No HA requirements.

|**Uncontrolled Deployments**
|Watchtower auto-deploys any new `:latest` image without approval.
|Medium
|Use branch-based tags (`:main`) instead of `:latest`. Only main branch triggers deploy.

|**VM Expiration**
|MaaS VM expires after 1 month. Requires manual reprovisioning.
|High (certain)
|Document reprovisioning process. Keep cloud-init script in version control.

|**Network Dependency**
|VM must reach ghcr.io to pull images and receive updates.
|Low
|School network typically has internet access. No mitigation needed.

|**Unknown Firewall Rules**
|MaaS firewall configuration is managed by teacher, not documented.
|Medium
|Test all ports (80, 8080, 9090, 9411) after provisioning. Contact teacher if blocked.
|===


=== Technical Debt

[cols="1,2,2"]
|===
|Debt |Description |Recommendation

|**Hardcoded Image Names**
|cloud-init.yaml contains placeholder `GITHUB_ORG` that must be manually replaced.
|Update cloud-init.yaml with actual image paths before deployment.

|**No Health Checks**
|Docker Compose doesn't define health checks for containers.
|Add `healthcheck` to services for better orchestration.

|**No Secrets Management**
|No mechanism for injecting secrets into containers.
|Use Docker secrets or environment files if secrets are needed in future.

|**No Backup Strategy**
|No backup for Prometheus metrics data.
|Acceptable for demo. Consider volume mounts if historical metrics needed.

|**Mixed Image Tags**
|cloud-init uses separate service images but pipeline builds single backend image.
|Align cloud-init with actual pipeline output (`backend` instead of separate service images).
=== Frontend

==== *MÃ¶gliche Probleme*

[cols="1,2,1", options="header"]
|===
| Risk | Description | Priority

| *No Centralized Authentication*
| Each microservice can currently be accessed independently. Without a centralized authentication and authorization concept, this poses a significant security risk.
| Critical

| *Missing Service-to-Service Security*
| Internal communication between microservices is not secured (e.g. no mTLS, no token validation).
| High

| *Single Point of Failure*
| Central components (e.g. API Gateway or database) are not designed redundantly and may bring down the entire system.
| High

| *Lack of Monitoring and Logging*
| There is no centralized logging or monitoring. Errors in individual services are difficult to trace.
| High

| *Unclear Service Boundaries*
| Business logic is partially redundant or not clearly separated between services, which complicates maintenance and extensibility.
| Medium

| *Missing Circuit Breaking*
| When a service fails, dependent services may also become blocked or crash.
| Medium

|===

==== *Mitigation Strategies*

[cols="1,2", options="header"]
|===
| Risk | Mitigation Strategy

| *No Centralized Authentication*
| Introduce a centralized authentication service (e.g. OAuth2 / OpenID Connect). JWT-based authentication via an API Gateway.

| *Missing Service-to-Service Security*
| Secure internal communication using mTLS or signed service tokens.

| *Single Point of Failure*
| Design critical components redundantly. Use load balancers and replication.

| *Lack of Monitoring and Logging*
| Centralized logging (e.g. ELK Stack) and monitoring (Prometheus, Grafana). Health checks per service.

| *Unclear Service Boundaries*
| Clearly define responsibilities per microservice using Domain-Driven Design.

| *Missing Circuit Breaking*
| Apply resilience patterns such as circuit breakers, retries, and timeouts (e.g. Resilience4j).

|===
